class CreateExploits < ActiveRecord::Migration[5.2]
  def change
    create_table :exploits, id: :uuid, default: 'uuid_generate_v4()' do |t|
      t.string :reference
      t.string :description
      t.string :link
      t.uuid :exploit_source_id

      t.timestamps
    end
    add_foreign_key :exploits, :exploit_sources, column: :exploit_source_id, primary_key: :id, on_delete: :cascade

    add_index :exploits, [:reference, :link, :description], unique: true
  end
end
