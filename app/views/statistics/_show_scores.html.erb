<!-- PROJECTS -->
<div class='card p-2'>
<%= render layout: 'layouts/header_collapse', locals: { id: 'projects_options', header: t('statistics.labels.projects_options'), count: nil, card_title_clazz: "d-flex justify-content-start line-hover-primary border-0 text-dark align-items-center fw-bold fs-5" } do %>
  <div class='d-flex flex-column p-2' data-controller="checker">
    <div class='d-flex align-items-center m-2'>
      <span class='form-check'>
        <input type="checkbox" data-action="checker#checkAll" data-source="check-all-p" id="check-all-p" class='form-check-input'>
        <label for='check-all-p' data-bs-toggle='tooltip' title="<%= t('statistics.labels.check_all_projects_tooltip') %>"><%= t('statistics.labels.check_all_projects') %></label>
      </span>
    </div>
    <div class='d-flex align-items-center'>
    <% @projects.each do |p| %>
      <div class='m-1 badge halo-primary'>
        <div class='form-check d-flex align-items-center'>
          <%= check_box_tag('projects[]', p.id, params['projects']&.include?(p.id.to_s) || (params['projects'].blank? && true), class: "form-check-input me-1", id: "projects_#{p.id}", data: {source: "check-all-p", target: 'checker.checkbox'}) %>
          <label for='projects_<%= p.id %>' ><%= "#{p.name}" %></label>
        </div>
      </div>
    <% end %>
    </div>
  </div>
<% end %>
</div>
<div class='m-2 d-flex flex-column'>
  <%- [[3, 'last_reports', false]].each do |ary| %>
    <%= render 'header_btn', ary: ary %>
  <% end %>
</div>
